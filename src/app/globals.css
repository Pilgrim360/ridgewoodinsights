@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    color: #415161;
  }
}

@layer components {
  .ProseMirror {
    @apply text-text;
  }

  .ProseMirror > * + * {
    @apply mt-4;
  }

  .ProseMirror .tableWrapper {
    @apply overflow-x-auto;
  }

  .ProseMirror table {
    @apply w-full border-collapse;
  }

  .ProseMirror th,
  .ProseMirror td {
    @apply border border-surface px-3 py-2 align-top;
  }

  .ProseMirror th {
    @apply bg-surface text-secondary;
  }

  .ProseMirror .page-break {
    @apply my-6 border-t border-surface;
  }

  @media print {
    .ProseMirror .page-break {
      break-after: page;
      page-break-after: always;
      border: 0;
      margin: 0;
      height: 0;
    }
  }

  .ProseMirror .embed-wrapper {
    @apply relative w-full overflow-hidden rounded-md border border-surface bg-background;
    padding-top: 56.25%;
  }

  .ProseMirror .embed-iframe {
    @apply absolute inset-0 h-full w-full;
  }

  .ProseMirror audio {
    @apply w-full;
  }

  /* Image alignment helpers (used for both editor + public rendering) */
  img.rw-img-align-left {
    @apply float-left mr-6 my-2;
    max-width: min(50%, 28rem);
  }

  img.rw-img-align-right {
    @apply float-right ml-6 my-2;
    max-width: min(50%, 28rem);
  }

  img.rw-img-align-center {
    @apply block mx-auto;
  }

  img.rw-img-align-full {
    @apply block w-full;
  }

  /* Editor node-view wrapper alignment (so text wraps inside the editor) */
  .ProseMirror .rw-image-nodeview.rw-img-align-left {
    @apply float-left mr-6 my-2;
    max-width: min(50%, 28rem);
  }

  .ProseMirror .rw-image-nodeview.rw-img-align-right {
    @apply float-right ml-6 my-2;
    max-width: min(50%, 28rem);
  }

  .ProseMirror .rw-image-nodeview.rw-img-align-center {
    @apply block mx-auto;
  }

  .ProseMirror .rw-image-nodeview.rw-img-align-full {
    @apply block w-full;
  }

  /* TipTap image node view (resize handle + selected ring) */
  .ProseMirror .rw-image-nodeview--selected img {
    @apply ring-2 ring-primary/40;
  }

  .ProseMirror .rw-image-resize-handle {
    @apply absolute -right-2 -bottom-2 h-4 w-4 rounded-sm border border-surface bg-white shadow;
    cursor: nwse-resize;
  }

  .ProseMirror .rw-image-resize-handle--active {
    @apply ring-2 ring-primary/30;
  }
}

/* Services Section 3D Animations */
@layer utilities {
  .service-card-3d {
    transform-style: preserve-3d;
    transition: transform 0.5s ease-out;
  }

  .service-card-3d:hover {
    transform: rotateX(5deg) rotateY(5deg) translateZ(10px);
  }

  .service-icon-glow {
    filter: drop-shadow(0 0 8px rgba(0, 100, 102, 0.5));
    transition: filter 0.3s ease-out;
  }

  .service-image-reveal {
    clip-path: inset(0 100% 0 0);
    transition: clip-path 0.6s ease-out;
  }

  .service-image-reveal:hover {
    clip-path: inset(0 0 0 0);
  }

  .service-card-tilt {
    transform: perspective(1000px) rotateX(0deg) rotateY(0deg);
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .service-card-tilt:hover {
    transform: perspective(1000px) rotateX(-8deg) rotateY(8deg);
  }

  .service-background-animation {
    animation: float 6s ease-in-out infinite;
  }

  @keyframes float {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  .service-pulse {
    animation: servicePulse 2s ease-in-out infinite;
  }

  @keyframes servicePulse {
    0%, 100% {
      opacity: 0.8;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.02);
    }
  }

  .service-grid-pattern {
    background-image: 
      radial-gradient(circle at 25% 25%, rgba(0, 100, 102, 0.03) 0%, transparent 50%),
      radial-gradient(circle at 75% 75%, rgba(44, 62, 80, 0.02) 0%, transparent 50%);
    animation: patternShift 8s ease-in-out infinite;
  }

  @keyframes patternShift {
    0%, 100% {
      background-position: 0% 0%, 100% 100%;
    }
    50% {
      background-position: 100% 100%, 0% 0%;
    }
  }
}

