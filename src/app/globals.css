@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    color: #415161;
  }
}

@layer components {
  .ProseMirror {
    @apply text-text;
  }

  .ProseMirror > * + * {
    @apply mt-4;
  }

  /* Tables (editor + public rendering) */
  .ProseMirror.prose .tableWrapper,
  .prose .tableWrapper {
    @apply max-w-full overflow-x-auto overflow-y-hidden rounded-lg border border-surface bg-white shadow-sm;
  }

  .ProseMirror.prose .tableWrapper > table,
  .prose .tableWrapper > table {
    @apply border-separate border-spacing-0;
    width: max-content;
  }

  .ProseMirror.prose .tableWrapper > table[align='left'],
  .prose .tableWrapper > table[align='left'] {
    margin-left: 0;
    margin-right: auto;
    float: none;
  }

  .ProseMirror.prose .tableWrapper > table[align='center'],
  .prose .tableWrapper > table[align='center'] {
    margin: 0 auto;
    float: none;
  }

  .ProseMirror.prose .tableWrapper > table[align='right'],
  .prose .tableWrapper > table[align='right'] {
    float: right;
    margin-left: 1rem;
    margin-right: 0;
  }

  .ProseMirror.prose .tableWrapper th,
  .ProseMirror.prose .tableWrapper td,
  .prose .tableWrapper th,
  .prose .tableWrapper td {
    @apply border-b border-r border-surface px-3 py-2 text-sm leading-snug align-top;
  }

  .ProseMirror.prose .tableWrapper tr > :last-child,
  .prose .tableWrapper tr > :last-child {
    @apply border-r-0;
  }

  .ProseMirror.prose .tableWrapper tr:last-child > th,
  .ProseMirror.prose .tableWrapper tr:last-child > td,
  .prose .tableWrapper tr:last-child > th,
  .prose .tableWrapper tr:last-child > td {
    @apply border-b-0;
  }

  .ProseMirror.prose .tableWrapper th,
  .prose .tableWrapper th {
    @apply bg-primary text-white font-semibold;
  }

  .ProseMirror.prose .tableWrapper tbody tr:nth-child(even) td,
  .prose .tableWrapper tbody tr:nth-child(even) td {
    @apply bg-surface/50;
  }

  .ProseMirror.prose .tableWrapper tbody tr:hover td,
  .prose .tableWrapper tbody tr:hover td {
    @apply bg-surface/40;
  }

  .ProseMirror .page-break {
    @apply my-6 border-t border-surface;
  }

  @media print {
    .ProseMirror .page-break {
      break-after: page;
      page-break-after: always;
      border: 0;
      margin: 0;
      height: 0;
    }
  }

  .ProseMirror .embed-wrapper {
    @apply relative w-full overflow-hidden rounded-md border border-surface bg-background;
    padding-top: 56.25%;
  }

  .ProseMirror .embed-iframe {
    @apply absolute inset-0 h-full w-full;
  }

  .ProseMirror audio {
    @apply w-full;
  }

  /* Image alignment helpers (used for both editor + public rendering) */
  img.rw-img-align-left {
    @apply float-left mr-6 my-2;
    max-width: min(50%, 28rem);
  }

  img.rw-img-align-right {
    @apply float-right ml-6 my-2;
    max-width: min(50%, 28rem);
  }

  img.rw-img-align-center {
    @apply block mx-auto;
  }

  img.rw-img-align-full {
    @apply block w-full;
  }

  /* Editor node-view wrapper alignment (so text wraps inside the editor) */
  .ProseMirror .rw-image-nodeview.rw-img-align-left {
    @apply float-left mr-6 my-2;
    max-width: min(50%, 28rem);
  }

  .ProseMirror .rw-image-nodeview.rw-img-align-right {
    @apply float-right ml-6 my-2;
    max-width: min(50%, 28rem);
  }

  .ProseMirror .rw-image-nodeview.rw-img-align-center {
    @apply block mx-auto;
  }

  .ProseMirror .rw-image-nodeview.rw-img-align-full {
    @apply block w-full;
  }

  /* TipTap image node view (resize handle + selected ring) */
  .ProseMirror .rw-image-nodeview--selected img {
    @apply ring-2 ring-primary/40;
  }

  .ProseMirror .rw-image-resize-handle {
    @apply absolute -right-2 -bottom-2 h-4 w-4 rounded-sm border border-surface bg-white shadow;
    cursor: nwse-resize;
  }

  .ProseMirror .rw-image-resize-handle--active {
    @apply ring-2 ring-primary/30;
  }
}

